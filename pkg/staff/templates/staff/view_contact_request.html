{%extends "staff/dashboard.html"%}

{%block content%}
<div class="table-responsive">
    <table class="table table-hover align-middle mb-0">
        <thead class="bg-light border-bottom">
            <tr class="text-uppercase small text-muted">
                <th>#</th>
                <th>Client</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Method</th>
                <th>Message</th>
                <th>Status</th>
                <th class="text-center">Action</th>
            </tr>
        </thead>
    
        <tbody>
            {% for contact_req in contact_pending_requests %}
            <tr>
                <td class="fw-semibold text-muted">{{ loop.index }}</td>
    
                <td>
                    <div class="fw-semibold">{{ contact_req.name|default('N/A', true) }}</div>
                    <small class="text-muted">Client</small>
                </td>
    
                <td>
                    <a href="mailto:{{ contact_req.email }}" class="text-decoration-none text-primary small">
                        {{ contact_req.email|truncate(20, True)|default('N/A', true) }}
                    </a>
                </td>
    
                <td>
                    <a href="tel:{{ contact_req.phone }}" class="text-decoration-none text-dark small">
                        {{ contact_req.phone|default('N/A', true) }}
                    </a>
                </td>
    
                <td>
                    <span class="badge rounded-pill bg-secondary">
                        <i class="fas fa-comments me-1"></i>
                        {{ contact_req.contact_method|default('N/A', true) }}
                    </span>
                </td>
    
                <td class="text-muted small">
                    {{ contact_req.message|truncate(50, True)|default('No message provided', true) }}
                </td>
    
                <td>
                    <span class="badge rounded-pill bg-warning text-dark">
                        {{ contact_req.contact_status|title|default('Assigned', true) }}
                    </span>
                </td>
    
                <td class="text-center">
                    <a href="{{ url_for('bpstaff.staff_update_contact_request', id=contact_req.id) }}"
                       class="btn btn-sm btn-outline-primary"
                       title="View & Respond">
                        <i class="fas fa-eye"></i>
                    </a>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="8" class="text-center text-muted py-4">
                    <i class="fas fa-inbox fa-2x mb-2 d-block"></i>
                    No new contact messages awaiting action.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    </div>
    </div>
    
{%endblock%}